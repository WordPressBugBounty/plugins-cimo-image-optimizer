(()=>{"use strict";function t(t){"undefined"!=typeof document&&("complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",t):t())}const e=window.wp.i18n;class n{constructor(t,n={}){this.file=t,this.options=n,this._progress=0,this._status=(0,e.__)("Ready","cimo-image-optimizer"),this._errorMessage=null}static get mimeTypes(){throw new Error("mimeTypes getter must be implemented by subclass")}static supportsMimeType(t){if(!t||"string"!=typeof t)return!1;const e=this.mimeTypes;return!!Array.isArray(e)&&e.includes(t)}get status(){return this._status}get errorMessage(){return this._errorMessage}get progress(){return this._progress}static get showProgress(){return!0}get showProgress(){return this.constructor.showProgress}async convert(){throw new Error("convert() must be implemented by subclass")}cancel(){}}const i=[{value:"webp",mimeType:"image/webp"},{value:"jpg",mimeType:"image/jpeg"},{value:"png",mimeType:"image/png"}];class s extends n{static get mimeTypes(){return["image/jpeg","image/png","image/webp","image/jpg"]}static get showProgress(){return!1}calculateDimensions(t,e,n){const i=(n=n||{}).scale?n.scale:1,s=n.width?n.width:"auto",o=n.height?n.height:"auto",r=n.aspectRatio?n.aspectRatio:"auto",a=n.maxDimension?n.maxDimension:0;let l=t*i,c=e*i;if(a&&"number"==typeof a&&a>0){const t=Math.max(l,c);if(t>a){const e=a/t;l*=e,c*=e}}if("auto"!==s&&"number"==typeof s&&(l=s,"auto"===o&&(c=e/t*l)),"auto"!==o&&"number"==typeof o&&(c=o,"auto"===s&&(l=t/e*c)),"auto"!==r){if("custom"===r)return{width:l,height:c};const[t,e]=r.split(":").map(Number),n=t/e,i=l/c;if(Math.abs(i-n)>.01)if(i>n)l=c*n;else{const t=l;l=t,c=t/n}}return{width:Math.round(l),height:Math.round(c)}}async convertImage(t,e="webp",n={}){let s=(n=n||{}).quality?n.quality:.8,o=n.maxDimension?n.maxDimension:0;return"string"==typeof s&&(s=parseFloat(s)/100,s||(s=.8)),"string"==typeof o&&(o=parseFloat(o)),new Promise((n,r)=>{const a=new Image;let l=null;a.onload=async()=>{const t=document.createElement("canvas"),{width:c,height:m}=this.calculateDimensions(a.width,a.height,{maxDimension:o});t.width=c,t.height=m;const d=t.getContext("2d"),p=a.width/a.height,u=c/m;let h=a.height,g=a.width,f=0,w=0;Math.abs(p-u)>.01&&(p>u?(g=a.height*u,f=(a.width-g)/2):(h=a.width/u,w=(a.height-h)/2)),d.drawImage(a,f,w,g,h,0,0,c,m);const y=i.find(t=>t.value===e),v="webp"===e||"jpg"===e?s:void 0;t.toBlob(function(e){URL.revokeObjectURL(l),l=null,d.clearRect(0,0,t.width,t.height),t.width=0,t.height=0,e?n(e):r(new Error("Failed to convert image"))},y.mimeType,v)},a.onerror=()=>{l&&(URL.revokeObjectURL(l),l=null),r(new Error("Failed to load image"))},l=URL.createObjectURL(t.file),a.src=l})}async convert(){const t=this.file,e=this.options?.format||"webp";if(!t.type||!t.type.startsWith("image/"))return{file:t,metadata:null};const n=i.find(t=>t.value===e);if(n&&t.type===n.mimeType)return{file:t,metadata:null};const s=document.createElement("canvas");if(n&&!s.toDataURL(n.mimeType).startsWith(`data:${n.mimeType}`))return console.error("[Cimo] "+e+" is not supported by the browser, please use another modern browser"),{file:t,metadata:null};if("image/gif"===t.type){const e=await t.slice(0,51200).arrayBuffer(),n=new Uint8Array(e);let i=0;for(let e=0;e<n.length-2;e++)if(33===n[e]&&249===n[e+1]&&4===n[e+2]&&(i++,i>1))return{file:t,metadata:null}}const o={file:t};try{const i=performance.now(),s=await this.convertImage(o,e,{quality:this.options?.quality||.8,maxDimension:this.options?.maxDimension||0}),r=performance.now();if(s.size>t.size)throw new Error("Resulting image is bigger than the input, skipping conversion.");const a="jpeg"===e?"jpg":e,l=t.name.replace(/\.[^/.]+$/,"")+"."+a,c={filename:l,originalFormat:t.type,originalFilesize:t.size,convertedFormat:n.mimeType,convertedFilesize:s.size,conversionTime:r-i,compressionSavings:t.size>0?s.size/t.size:null};return{file:new(0,t.constructor)([s],l,{type:n.mimeType,lastModified:Date.now()}),metadata:c}}catch(t){throw new Error(`Failed to convert image: ${t.message}`)}}}class o extends n{static get showProgress(){return!1}async convert(){return{file:this.file,metadata:null}}}const r=window.wp.hooks,a=t=>{let e=t;if(!e||"object"!=typeof e||"string"!=typeof e.name||"number"!=typeof e.size||"string"!=typeof e.type||"function"!=typeof e.slice)return new o(e);if(!(e instanceof File)){const t=e;e=new File(t?[t]:[],t?.name||"unknown",{type:t?.type||"application/octet-stream",lastModified:"number"==typeof t?.lastModified?t.lastModified:Date.now()})}if(e.type.startsWith("image/")){if(!function(t){const e={webp:"image/webp",avif:"image/avif"}[t.toLowerCase()]||(t.startsWith("image/")?t:null);if(!e)return!1;const n=document.createElement("canvas");n.width=1,n.height=1;try{return n.toDataURL(e).startsWith(`data:${e}`)}catch(t){return!1}}("webp"))return new o(e);if(s.supportsMimeType(e.type))return new s(e,{format:"webp",quality:window.cimoSettings?.webpQuality||.8,maxDimension:window.cimoSettings?.maxImageDimension||0})}return(0,r.applyFilters)("cimo.getFileConverter",null,e)||new o(e)};function l(t){return!t.every(t=>"NullConverter"===t.constructor.name)}function c(t){return("string"!=typeof t?String(t):t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/`/g,"&#96;")}function m(t,e="editor-canvas"){const n=()=>{const n=document.querySelector(`iframe[name="${e}"]`);if(n&&n.contentDocument){const e=()=>{n.contentDocument.body?t(n.contentDocument):setTimeout(e,50)};"loading"===n.contentDocument.readyState?n.addEventListener("load",()=>{e()}):e()}};n();let i=0;const s=setInterval(()=>{i>=10?clearInterval(s):(i++,n())},1e3),o=new MutationObserver(t=>{t.forEach(t=>{t.addedNodes.forEach(t=>{t.nodeType===Node.ELEMENT_NODE&&("IFRAME"===t.tagName&&t.name===e||t.querySelector&&t.querySelector(`iframe[name="${e}"]`))&&n()})})});return o.observe(document.body,{childList:!0,subtree:!0}),o}const d=t=>{if(!Array.isArray(t))return Promise.resolve();const e=t.filter(t=>null!==t);return 0===e.length?Promise.resolve():(e.forEach(t=>{t.filename&&p(t.filename,t)}),new Promise((t,n)=>{fetch(`${window.cimoSettings?.restUrl||"/wp-json/cimo/v1/"}metadata`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-WP-Nonce":window.cimoSettings?.nonce||window.wpApiSettings?.nonce},body:JSON.stringify({metadata:e}),credentials:"same-origin"}).then(t=>t.ok?t.json():t.json().then(e=>{throw new Error(e.message||t.statusText)})).then(e=>{t(e)}).catch(t=>{console.error(`Failed to save metadata for filenames: [${e.map(t=>t.filename).join(", ")}]:`,t),n(new Error(`Failed to save metadata: ${t.message}`))})}))},p=(t,e)=>{window.cimoMetadataCache||(window.cimoMetadataCache={}),window.cimoMetadataCache[t.replaceAll(/\s+/g,"-")]={...e}};class u{constructor(t=[],e=null){this.converters=Array.isArray(t)?t.filter(t=>!0===t?.showProgress):[],this.closeHandler="function"==typeof e?e:null,this.interval=null,this.modal=null,this.progressBars=[],this._setupModal()}open(){this.modal&&0!==this.converters.length&&(this.modal.style.display="flex",this._startInterval())}_handleCloseClick(){confirm((0,e.__)("Closing this dialog will cancel the uploading process. Are you sure you want to continue?","cimo-image-optimizer"))&&(this.closeHandler&&this.closeHandler(),this.close())}close(){this.modal&&0!==this.converters.length&&setTimeout(()=>{this.modal.style.display="none",this._stopInterval(),this.modal.remove(),this.modal=null},300)}_setupModal(){this.modal=document.createElement("div"),this.modal.className="cimo-progress-modal",this.modal.style.cssText="\n\t\t\tposition: fixed;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\twidth: 100vw;\n\t\t\theight: 100vh;\n\t\t\tbackground: rgba(0,0,0,0.35);\n\t\t\tdisplay: none;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tz-index: 9999999;\n\t\t",this.modal.addEventListener("mousedown",t=>{t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()});const t=document.createElement("div");t.className="cimo-progress-wrapper",t.style.cssText="\n\t\t\tbackground: #fff;\n\t\t\tborder-radius: 8px;\n\t\t\tpadding: 2em 2em 1em 2em;\n\t\t\tmax-width: 500px;\n\t\t\tbox-shadow: 0 6px 32px rgba(0,0,0,0.24);\n\t\t\tposition: relative;\n\t\t\twidth: 90%;\n\t\t";const n=document.createElement("h3");n.className="cimo-progress-title",n.innerText=(0,e.__)("Optimizing your files","cimo-image-optimizer"),n.style.cssText="\n\t\t\tfont-size: 1.6em !important;\n\t\t\tfont-weight: 600 !important;\n\t\t\tmargin: 0 0 0.5em !important;\n\t\t",t.appendChild(n);const i=document.createElement("div");if(i.className="cimo-progress-subtitle",i.innerText=(0,e.__)("Preparing your files for upload‚Ä¶","cimo-image-optimizer"),i.style.cssText="\n\t\t\tmargin-bottom: 2em;\n\t\t",t.appendChild(i),this.errorNote=document.createElement("div"),this.errorNote.className="cimo-progress-error-note",this.errorNote.innerText=(0,e.__)("Some media files could not be optimized and were uploaded in their original format.","cimo-image-optimizer"),this.errorNote.style.cssText="\n\t\t\tdisplay: none;\n\t\t\tbackground: #fff3cd;\n\t\t\tcolor: #856404;\n\t\t\tborder: 1px solid #ffeeba;\n\t\t\tborder-radius: 8px;\n\t\t\tpadding: 1em;\n\t\t\tmargin-bottom: 1.5em;\n\t\t\tfont-size: 1em;\n\t\t",t.appendChild(this.errorNote),this.closeHandler){const e=document.createElement("button");e.className="cimo-progress-close",e.type="button",e.innerHTML="&times;",e.style.cssText="\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0.7em;\n\t\t\t\tright: 1em;\n\t\t\t\tbackground: transparent;\n\t\t\t\tborder: none;\n\t\t\t\tfont-size: 2em;\n\t\t\t\tcursor: pointer;\n\t\t\t\tcolor: #888;\n\t\t\t",e.addEventListener("click",()=>this._handleCloseClick()),t.appendChild(e)}this.progressBars=[],this.progressList=document.createElement("div"),this.progressList.className="cimo-progress-list",t.appendChild(this.progressList),this.modal.appendChild(t),document.body.appendChild(this.modal),this._renderProgressBars()}_renderProgressBars(){this.progressList.innerHTML="",this.progressBars=[],this.converters.forEach((t,e)=>{const n=document.createElement("div");n.className="cimo-progress-bar-container",n.style.cssText="\n\t\t\t\tmargin-bottom: 1em;\n\t\t\t\tpadding: 16px 16px 16px 70px;\n\t\t\t\tborder: 1px solid #e2e8f0;\n\t\t\t\tborder-radius: 12px;\n\t\t\t\tposition: relative;\n\t\t\t";const i=document.createElement("span");i.className="cimo-stat-icon",i.style.cssText="\n\t\t\t\tbackground: #16a2491a;\n        \t\tcolor: #16a249;\n\t\t\t\tpadding: 8px;\n\t\t\t\tborder-radius: 8px;\n\t\t\t\tmargin-bottom: 8px;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 16px;\n\t\t\t\ttop: 16px;\n\t\t\t";let s="";s=t.file&&t.file.type&&t.file.type.startsWith("video/")?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-video-icon lucide-video"><path d="m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5"/><rect x="2" y="6" width="14" height="12" rx="2"/></svg>':t.file&&t.file.type&&t.file.type.startsWith("audio/")?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-music-icon lucide-music"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-image-icon lucide-image"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>',i.innerHTML=s,n.appendChild(i);const o=document.createElement("div");o.className="cimo-progress-label",o.innerText=t.file?.name||`File ${e+1}`,o.style.cssText="\n\t\t\t\tmargin-bottom: 0.2em;\n\t\t\t\tfont-size: 1em;\n\t\t\t\tfont-weight: 600;\n\t\t\t\tmax-width: 80%;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\toverflow: hidden;\n\t\t\t";const r=document.createElement("div");r.className="cimo-size-label",r.innerText=t.file&&t.file.size?t.file.size/1024/1024>=1?(t.file.size/1024/1024).toFixed(2)+" MB":(t.file.size/1024).toFixed(1)+" KB":"",r.style.cssText="\n\t\t\t\tmargin-bottom: 0.5em;\n\t\t\t\tfont-size: 1em;\n\t\t\t";const a=document.createElement("div");a.style.cssText="\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tmargin-bottom: 0.5em;\n\t\t\t";const l=document.createElement("div");l.className="cimo-progress-status-label",l.innerText="",l.style.cssText="\n\t\t\t\tfont-size: 1em;\n\t\t\t\tcolor: #3b3b3b;\n\t\t\t";const c=document.createElement("div");c.className="cimo-percentage-label",c.innerText="0%",c.style.cssText="\n\t\t\t\tfont-size: 1em;\n\t\t\t",a.appendChild(l),a.appendChild(c);const m=document.createElement("div");m.className="cimo-progress-bar-bg",m.style.cssText="\n\t\t\t\tbackground: #e8ecef;\n\t\t\t\tborder-radius: 5px;\n\t\t\t\theight: 8px;\n\t\t\t\twidth: 100%;\n\t\t\t\toverflow: hidden;\n\t\t\t";const d=document.createElement("div");d.className="cimo-progress-bar",d.style.cssText="\n\t\t\t\tbackground: linear-gradient(90deg, #00d8f0 0%, #2bc566 100%);\n\t\t\t\twidth: 0%;\n\t\t\t\theight: 100%;\n\t\t\t\ttransition: width 0.5s linear;\n\t\t\t\tborder-radius: 5px 0 0 5px;\n\t\t\t",d.sizeLabelEl=r,d.statusLabelEl=l,d.percentageLabelEl=c,m.appendChild(d),n.appendChild(o),n.appendChild(r),n.appendChild(a),n.appendChild(m),this.progressList.appendChild(n),this.progressBars.push(d)})}_startInterval(){this.interval||(this._updateProgress(),this.interval=setInterval(()=>this._updateProgress(),500))}_stopInterval(){this.interval&&(clearInterval(this.interval),this.interval=null)}_updateProgress(){let t=!0,e=!1;this.converters.forEach((n,i)=>{let s=100*n.progress;("number"!=typeof s||isNaN(s)||s<0)&&(s=0),s>=100&&(s=100),s<100&&(t=!1),n.errorMessage&&(e=!0,this.errorNote.style.display="block"),this.progressBars[i]&&(this.progressBars[i].statusLabelEl.style.cssText=`\n\t\t\t\t\tcolor: ${n.errorMessage?"#dc3545":"inherit"};\n\t\t\t\t`,this.progressBars[i].statusLabelEl.innerText=n.errorMessage||n.status,this.progressBars[i].style.width=s+"%",this.progressBars[i].percentageLabelEl.innerText=parseInt(s)+"%")}),t&&"block"===this.modal.style.display&&(e||setTimeout(()=>this.close(),750))}}function h(t){if(!t)return;if(!t.body)return;t.body.__cimo_dropzone_listener_attached||(t.body.addEventListener("drop",async e=>{if(e.__cimo_converted)return;const n=Array.from(e.dataTransfer.files).map(t=>a(t));if(!l(n))return;if(!(e.target.closest(".media-frame-uploader")||e.target.closest(".supports-drag-drop").querySelector(".media-frame-uploader")||e.target.closest(".media-upload-form")||e.target.closest(".editor-post-featured-image")||e.target.closest(".editor-styles-wrapper")||e.target.closest(".uploader-window")))return;let i;for(e.preventDefault(),e.stopPropagation();i=document.querySelector('.uploader-window[style*="display: block"]');)i.style.display="none";const s=new u(n,()=>{n.forEach(t=>t.cancel())});s.open();let o=!1;const r=await Promise.all(n.map(async t=>{try{return await t.convert()}catch(e){return o=!0,console.warn(e),{file:t.file,metadata:null}}})),c=r.map(t=>t.file),m=r.map(t=>t.metadata),p=new DataTransfer;if(c.forEach(t=>{p.items.add(t)}),await d(m),e.target?.classList.contains("components-drop-zone")){const n=t!==document,i=new Event("drop",{bubbles:!n});Object.defineProperty(i,"dataTransfer",{value:p,writable:!1}),i.__cimo_converted=!0,e.target.dispatchEvent(i)}else{const n=document.querySelector('.media-modal input[type="file"]')||document.querySelector('.media-upload-form input[type="file"]')||document.querySelector('input[type="file"]');if(n){n.files=p.files;const e=t!==document,i=new Event("change",{bubbles:!e});i.__cimo_converted=!0,n.dispatchEvent(i)}else{const t=new Event("drop",{bubbles:!0});Object.defineProperty(t,"dataTransfer",{value:p,writable:!1}),t.__cimo_converted=!0,e.target.dispatchEvent(t)}}o||s.close()},!0),t.body.__cimo_dropzone_listener_attached=!0)}function g(t){if(!window.wp&&!t)return;if(!t.body)return;t.body.__cimo_selectfiles_listener_attached||(t.body.addEventListener("change",async t=>{if("file"!==t.target.type)return;if(t.__cimo_converted)return;const e=Array.from(t.target.files).map(t=>a(t));if(!l(e))return;if(!(t.target.closest(".components-form-file-upload")||t.target.closest(".media-frame")||t.target.closest(".media-upload-form")||t.target.closest(".moxie-shim")))return;t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();const n=new u(e,()=>{e.forEach(t=>t.cancel())});n.open();let i=!1;const s=await Promise.all(e.map(async t=>{try{return await t.convert()}catch(e){return i=!0,console.warn(e),{file:t.file,metadata:null}}})),o=s.map(t=>t.file),r=s.map(t=>t.metadata),c=new DataTransfer;o.forEach(t=>{c.items.add(t)}),await d(r),t.target.files=c.files;const m=new Event("change",{bubbles:!0});m.__cimo_converted=!0,t.target.dispatchEvent(m),i||n.close()},!0),t.body.__cimo_selectfiles_listener_attached=!0)}function f(t,e=2,n=!1){if(0===t)return"0 Bytes";const i=e<0?0:e,s=Math.abs(t),o=Math.floor(Math.log(s)/Math.log(1024));let r=t<0?"-":"";return n&&(r="-"===r?"":"-"),r+parseFloat((s/Math.pow(1024,o)).toFixed(i))+" "+["Bytes","KB","MB","GB"][o]}function w({model:t,container:n}){if(!t||!n)return;if(n.querySelector(".cimo-media-manager-metadata"))return;let i=t.get("cimo")||null;var s;if(i&&0!==Object.keys(i).length||(s=t.get("originalImageName")||t.get("filename"),i=window.cimoMetadataCache?.[s?.replaceAll(/\s+/g,"-")]||null),!i)return;const o=document.createElement("div");o.className="cimo-media-manager-metadata";const r=function(t){if(!t)return"Media";const[e="media"]=t.split("/");switch(e.toLowerCase()){case"image":return"Image";case"video":return"Video";case"audio":return"Audio";default:return"Media"}}(i.convertedFormat||t.get("mime")||"");let a=`\n\t\t<div class="cimo-media-manager-metadata-title-container">\n\t\t\t<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 672 672" height="20" width="20">\n\t\t\t\t<path d="M132.5 132.5C182.4 82.5 253 56 336 56C419 56 489.6 82.5 539.5 132.5C589.4 182.5 616 253 616 336C616 419 589.5 489.6 539.5 539.5C489.5 589.4 419 616 336 616C253 616 182.4 589.5 132.5 539.5C82.6 489.5 56 419 56 336C56 253 82.5 182.4 132.5 132.5z"/>\n\t\t\t</svg>\n\t\t\t<h3 class="cimo-media-manager-metadata-title">\n\t\t\t\t${c((0,e.sprintf)((0,e.__)("%s Optimized by Cimo","cimo-image-optimizer"),r))}\n\t\t\t</h3>\n\t\t</div>\n\t\t<ul>\n\t`;const l=i.compressionSavings?(100-100*i.compressionSavings).toFixed(2):null,m=f(i.originalFilesize-i.convertedFilesize,1,!0);a+=`\n\t\t<li class="cimo-compression-savings ${c(l>0?"cimo-optimization-savings-up":"cimo-optimization-savings-down")}">\n\t\t\tSaved ${c(l)}%\n\t\t\t<span class="cimo-compression-savings-bytes">(${c(m)})</span>\n\t\t</li>\n\t`,a+=`\n\t\t<li class="cimo-filesize-original">\n\t\t\tOriginal: <span class="cimo-value">${c(f(parseInt(i.originalFilesize)||0))}</span>\n\t\t</li>\n\t\t<li class="cimo-filesize-optimized">\n\t\t\tOptimized: <span class="cimo-value">${c(f(parseInt(i.convertedFilesize)||0))}</span>\n\t\t</li>\n\t`,a+=`\n\t\t<li class="cimo-converted">\n\t\t\tüèûÔ∏è Converted to <span class="cimo-value">${c(function(t){if(!t)return"";const e=t.split("/"),n=e[1]||e[0]||"";return"webp"===n?"WebP":n.charAt(0).toUpperCase()+n.slice(1)}(i.convertedFormat))}</span>\n\t\t</li>\n\t`;let d="N/A";if(i.conversionTime){const t=parseFloat(i.conversionTime);d=t<1e3?`${t.toFixed(0)} ms`:t<6e4?`${(t/1e3).toFixed(1)} sec`:`${(t/6e4).toFixed(1)} min`}a+=`\n\t\t<li class="cimo-time">\n\t\t\t‚ö°Ô∏è Done in <span class="cimo-value">${c(d)}</span>\n\t\t</li>\n\t\t</ul>\n\t`,o.innerHTML=a,n.appendChild(o)}t(()=>{h(document),m(t=>{h(t)})}),t(()=>{g(document),m(t=>{g(t)})}),t(()=>{if("undefined"!=typeof wp&&wp.media&&wp.media.view&&wp.media.view.Attachment&&wp.media.view.Attachment.Details&&(wp.media.view.Attachment.Details=wp.media.view.Attachment.Details.extend({template(t){const e=wp.media.template("attachment-details")(t),n=document.createElement("div");n.innerHTML=e;const i=n.querySelector(".attachment-info");return w({model:t.model,container:i}),n.innerHTML}}),wp.media.view.Attachment.Details.TwoColumn)){const t=wp.media.view.Attachment.Details.TwoColumn;wp.media.view.Attachment.Details.TwoColumn=t.extend({render(){t.prototype.render.apply(this,arguments);const e=this.el.querySelector(".attachment-info > .details");return w({model:this.model,container:e}),this}})}})})();